# üê≥ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ü–æ–ª–Ω—ã–π –î–µ–ø–ª–æ–π –≤ Docker (VPS / Yandex.Cloud)

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (Frontend + Backend + DB) –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (VPS).

**–ß—Ç–æ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è:**
1.  –°–µ—Ä–≤–µ—Ä (VPS) —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º Docker –∏ Docker Compose.
    *   OS: Ubuntu 22.04 LTS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
    *   CPU/RAM: –ú–∏–Ω–∏–º—É–º 2 vCPU / 4 GB RAM
    *   –î–∏—Å–∫: 20-30 GB
2.  –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH.
3.  –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω (A-–∑–∞–ø–∏—Å—å, —É–∫–∞–∑—ã–≤–∞—é—â–∞—è –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞).

---

## üöÄ –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ó–∞–π–¥–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ SSH –∏ –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
# –ï—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSH –∫–ª—é—á–∏ –∏–ª–∏ HTTPS —Å —Ç–æ–∫–µ–Ω–æ–º
git clone https://github.com/–í–ê–®_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨/repair-platform.git .
```

*–ï—Å–ª–∏ Git –Ω–µ—Ç, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã `docker-compose.prod.yml`, `nginx/`, `backend/`, `frontend/` —á–µ—Ä–µ–∑ SCP.*

---

## üîë –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ (.env)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—Ç–∞–º, –≥–¥–µ –ª–µ–∂–∏—Ç `docker-compose.prod.yml`):

```bash
nano .env
```

–í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```env
# –ü–∞—Ä–æ–ª—å –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã–π)
POSTGRES_PASSWORD=SuperSecretPassword123!

# –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è Rails (–≤–æ–∑—å–º–∏—Ç–µ –∏–∑ backend/config/master.key –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ)
RAILS_MASTER_KEY=–≤–∞—à_–¥–ª–∏–Ω–Ω—ã–π_–∫–ª—é—á_–∏–∑_—Ñ–∞–π–ª–∞_master_key
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ (`Ctrl+O`, `Enter`) –∏ –≤—ã–π–¥–∏—Ç–µ (`Ctrl+X`).

---

## üèóÔ∏è –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ (Build & Run)

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É –∏ —Å—Ç–∞—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ:

```bash
# –í–∞–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–Ω–æ prod —Ñ–∞–π–ª!
docker compose -f docker-compose.prod.yml up -d --build
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
1.  –°–∫–∞—á–∞–µ—Ç—Å—è Postgres.
2.  –°–æ–±–µ—Ä–µ—Ç—Å—è Backend (Ruby on Rails).
3.  –°–æ–±–µ—Ä–µ—Ç—Å—è Frontend (React -> Vite Build -> Nginx).
4.  –ó–∞–ø—É—Å—Ç–∏—Ç—Å—è Nginx (–æ–±—â–∏–π —à–ª—é–∑).

‚è≥ *–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∑–∞–π–º–µ—Ç 5-10 –º–∏–Ω—É—Ç (—Å–±–æ—Ä–∫–∞).*

---

## üõ†Ô∏è –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏—Å—å (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∞–Ω–¥–æ–π `docker ps`), –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ.

```bash
# 1. –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose -f docker-compose.prod.yml exec backend bin/rails db:migrate

# 2. –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (Admin, Client, Products –∏ —Ç.–¥.)
# –í–ê–ñ–ù–û: –î–µ–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ!
docker compose -f docker-compose.prod.yml exec backend bin/rails db:seed
```

---

## ‚úÖ –í—Å—ë –≥–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —Å–∞–π—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø–æ –≤–∞—à–µ–º—É IP-–∞–¥—Ä–µ—Å—É –∏–ª–∏ –¥–æ–º–µ–Ω—É:
`http://–í–ê–®_IP_–ò–õ–ò_–î–û–ú–ï–ù`

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
docker compose -f docker-compose.prod.yml logs -f --tail=100
```

---

## üîÑ –ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–¥?

–û–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π (—Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è), –µ—Å–ª–∏ –≤—ã –∑–∞–ø—É—à–∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Git:

```bash
git pull && \
docker compose -f docker-compose.prod.yml up -d --build --no-deps && \
docker compose -f docker-compose.prod.yml exec backend bin/rails db:migrate
```
