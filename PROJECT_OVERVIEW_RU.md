# Обзор Проекта: DYNAMIX (Repair Platform)

## 1. Описание Проекта
**DYNAMIX** — это B2B платформа для управления закупками, логистикой и поставками железнодорожных запчастей (колесные пары, подшипники и др.). Система автоматизирует весь цикл сделки: от выбора товара в каталоге до доставки на склад клиента с формированием всех необходимых юридических и бухгалтерских документов.

Основная цель — упростить взаимодействие между поставщиком (Comander Sup) и корпоративными клиентами (например, КТЖ), исключив ручное согласование договоров и счетов.

---

## 2. Бизнес-Требования и Функционал

### Ролевая Модель
Система поддерживает несколько ролей пользователей с разным доступом:
*   **Клиент (Admin/User)**: Просмотр каталога, оформление заказов, ввод реквизитов компании, подписание договоров, оплата, отслеживание статуса.
*   **Склад (Warehouse)**: Приемка товаров, выдача заказов водителям.
*   **Водитель (Driver)**: Получение назначенных заказов, доставка до клиента, подтверждение доставки.
*   **Администратор**: Полное управление системой.

### Основные Бизнес-Процессы
1.  **Каталог и Корзина**:
    *   Просмотр товаров с фильтрацией (город, толщина обода, диаметр и т.д.).                          §   
    *   Актуальные остатки (планируется интеграция с 1С).
2.  **Оформление Заказа**:
    *   Ввод реквизитов компании (БИН, Юр. адрес, Банк) при создании заказа.
    *   Автоматическая генерация Договора и Счета на оплату (PDF).
3.  **Документооборот**:
    *   Генерация PDF документов (Счет, Договор) на лету.
    *   Поддержка юридически значимых данных.
4.  **Логистика**:
    *   Автоматический или ручной поиск водителя.
    *   Статусная модель заказа: `cart` -> `pending_contract` -> `pending_payment` -> `paid` -> `searching_driver` -> `driver_assigned` -> `at_warehouse` -> `in_transit` -> `delivered` -> `completed`.

---

## 3. Технологический Стек

### Backend (Серверная часть)
*   **Фреймворк**: Ruby on Rails 7.1 API mode.
*   **Язык**: Ruby 3.2.0.
*   **База данных**: PostgreSQL (в продакшене), SQLite3 (в разработке).
*   **Авторизация**: `devise-jwt` (JWT токены).
*   **Контроль доступом**: `pundit` (политики доступа для ролей).
*   **Машина состояний**: `aasm` (управление статусами заказов).
*   **PDF Генерация**: `prawn` (создание счетов и договоров).
*   **API Сериализация**: `jsonapi-serializer`.

### Frontend (Клиентская часть)
*   **Фреймворк**: React 19.
*   **Сборщик**: Vite.
*   **Язык**: TypeScript.
*   **Стилизация**: TailwindCSS (с `class-variance-authority`, `clsx`, `tailwind-merge`).
*   **UI Компоненты**: Radix UI (Headless UI примитивы).
*   **Роутинг**: React Router DOM 6.
*   **Запросы к API**: Axios, TanStack Query (React Query).
*   **Иконки**: Lucide React.
*   **Линтинг**: ESLint 9 + TypeScript ESLint.

---

## 4. Текущее Состояние и Планы
Проект находится в стадии активной разработки и внедрения новых фич.

*   [x] Базовая структура Backend и API.
*   [x] Авторизация и Роли.
*   [x] Каталог товаров и Корзина.
*   [x] Генерация PDF счетов.
*   [ ] **Интеграция с 1С**: Получение реальных остатков (Task: GET запрос) и выгрузка заказов.
*   [ ] **Реквизиты**: Полноценное сохранение реквизитов компании в профиле и заказе.
*   [ ] **Логистика**: Доработка интерфейсов водителя и склада.

---

## 5. Инфраструктура
*   **Контейнеризация**: Docker & Docker Compose (для локального запуска backend + frontend + db).
*   **Скрипты**: `start-all.sh` для быстрого запуска.
